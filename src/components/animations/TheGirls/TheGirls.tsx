import React, { useState } from "react";
import {
  Clothes,
  Eye,
  Eyebrow,
  Face,
  Hair,
  LaptopBase,
  LaptopLogo,
  LaptopOutline,
  LaptopScreen,
  Sparkle,
  SpeechBubble,
  SquintingEye,
} from "./TheGirls.elements";
import { useSpring, easings, to, animated } from "@react-spring/web";
import { defaultColourScheme } from "../../../styles/colours.constants";
import { Holmes } from "./Holmes";
import { Bojji } from "./Bojji";

const ArmAnimationDuration = 400;
const SparkleRotationDuration = 600;
const HeadAnimationDuration = 400;
const SpeechAnimationDuration = 400;
const activeAnimationDuration = 250;
const laptopAnimationDuration = 250;

export const TheGirls = () => {
  const [showSquintingEyes, setShowSquintingEyes] = useState<boolean>(false);
  const [counter, setCounter] = useState<number>(0);

  const [headMovement] = useSpring(() => ({
    from: { y: 2.5 },
    to: { y: 0 },
    loop: { reverse: true },
    config: {
      duration: HeadAnimationDuration,
      easing: easings.easeInOutSine,
    },
  }));

  const [speechBubbleMovement] = useSpring(() => ({
    from: { y: -2.5 },
    to: { y: 2.5 },
    loop: { reverse: true },
    config: {
      duration: SpeechAnimationDuration,
      easing: easings.easeInOutSine,
    },
  }));

  const [leftArmMovement] = useSpring(() => ({
    from: { y: 10 },
    to: { y: 0 },
    loop: { reverse: true },
    config: {
      duration: ArmAnimationDuration,
      easing: easings.easeInOutSine,
    },
  }));

  const [rightArmMovement] = useSpring(() => ({
    from: { y: 0 },
    to: { y: 10 },
    loop: { reverse: true },
    config: {
      duration: ArmAnimationDuration,
      easing: easings.easeInOutSine,
    },
  }));

  const [sparkleRotation] = useSpring(() => ({
    from: { rotate: -15, scale: 0.9 },
    to: { rotate: 15, scale: 1.1 },
    loop: { reverse: true },
    config: {
      duration: SparkleRotationDuration,
      easing: easings.easeInOutSine,
    },
  }));

  const [laptopAnimation, laptopAnimationApi] = useSpring(() => ({
    from: { scale: 1 },
    config: {
      duration: laptopAnimationDuration,
      easing: easings.easeInOutSine,
    },
  }));

  const handleClick = () => {
    if (showSquintingEyes) return;

    setShowSquintingEyes(true);
    setCounter(counter + 1);

    laptopAnimationApi.start({
      from: { scale: 1 },
      to: [{ scale: 1.05 }, { scale: 1 }, { scale: 1.05 }],
      config: {
        duration: activeAnimationDuration / 2,
        easing: easings.easeInOutSine,
      },
    });
    setTimeout(() => {
      setShowSquintingEyes(false);
    }, activeAnimationDuration);
  };

  return (
    <svg
      version="1.1"
      x="0px"
      y="0px"
      viewBox="0 0 500 500"
      className="max-h-3/5 mx-auto max-w-2xs"
    >
      <Clothes d="M148.3,387.39c0,0,20.25-59.5,104.7-59.5c78.22,0,99.94,59.5,99.94,59.5H148.3z" />
      <animated.g
        transform={headMovement.y.to((value) => `translate(0 ${value})`)}
        onClick={handleClick}
        className={"cursor-pointer"}
      >
        <Face id="Left_Ear" cx={175.68} cy={270.43} r={35.88} />
        <Face id="Right_Ear" cx={325.57} cy={270.43} r={35.88} />
        <Face id="Face" cx={248.74} cy={257.78} r={98.91} />
        <Hair
          d="M149.84,267.48c0,0-10.84,102.22,98.91,102.22s106.03-107.11,106.03-107.11l-17.57,6.44
		c0,0,2.31,53.67-37.2,53.67c-23.07,0-13.36-16.4-49.39-16.38c-39.56,0.01-28.82,16.09-52.92,16.15
		c-24.11,0.07-39.14-18.18-39.14-51.36C151.35,253.42,149.84,267.48,149.84,267.48z"
        />
        <Hair
          d="M108.18,203.85c16.6-36.71,33.89-64.79,52.03-82.38c0.76-0.74,0.59-2.01-0.36-2.47
		c-4.26-2.07-10.52-3.47-19.25-4.03c-1.55-0.1-2.01-2.16-0.64-2.88C184.7,88.5,244.23,54.1,283.26,75.96
		c1.31,0.74,2.75-0.61,2.13-1.98c-3.3-7.23-3.82-17.53-2.67-29.68c0.12-1.3,1.7-1.89,2.62-0.95c6.67,6.77,25.48,27.41,22.67,42.44
		c-0.26,1.42,1.32,2.4,2.46,1.51c17.93-13.92,33.25-5.11,38.12-1.55c0.84,0.61,0.83,1.86-0.01,2.48L333.74,99
		c-0.91,0.66-0.83,2.05,0.16,2.58c7.38,3.94,30.76,22.74,50.65,107.78c0.32,1.37-1.2,2.39-2.37,1.62c-6.09-4.05-10.35-2.26-11.9-1.3
		c-0.41,0.25-0.66,0.66-0.71,1.14c-0.52,5.13-4.75,38.94-28.95,79.26c-0.83,1.38-2.94,0.7-2.84-0.9
		c1.38-22.67-4.08-33.09-4.08-33.09s2.31,1.15-2.47,8.56c-0.76,1.18-2.58,0.83-2.81-0.56c-5.05-30.41-21.22-57.1-26.04-64.55
		c-0.61-0.94-1.98-0.94-2.58,0c-4.42,6.95-21.76,29.56-64.99,38.39c-1.31,0.27-2.31-1.14-1.63-2.29
		c8.31-14.25,7.87-25.66,7.18-30.31c-0.16-1.1-1.39-1.67-2.33-1.08c-7.85,4.88-38.58,23.46-57.98,27.36
		c-1.4,0.28-2.38-1.36-1.48-2.47c4.35-5.35,10.09-14.69,8.28-25.86c-0.17-1.03-1.3-1.6-2.24-1.13
		c-25.32,12.7-27.88,59.49-25.27,91.19c0.13,1.6-1.98,2.29-2.83,0.93c-32.26-51.78-29.34-81.84-27.62-90.05
		c0.23-1.08-0.73-2.03-1.82-1.8L109.9,206C108.67,206.25,107.67,205,108.18,203.85z"
        />
        <Eyebrow
          d="M221.55,249.66c0.74,0.96-0.3,2.27-1.41,1.77c-5.35-2.43-15.49-6.57-22.45-6.57c-6.96,0-17.1,4.14-22.45,6.57
		c-1.11,0.5-2.15-0.81-1.41-1.77c3.28-4.25,10.54-10.88,23.86-10.88C211.02,238.79,218.27,245.41,221.55,249.66z"
        />
        {showSquintingEyes ? (
          <SquintingEye
            d="M216.26,278.28h-37.13c-2.48,0-4.5-2.01-4.5-4.5v0c0-2.48,2.01-4.5,4.5-4.5h37.13c2.48,0,4.5,2.01,4.5,4.5v0
		C220.76,276.26,218.74,278.28,216.26,278.28z"
          />
        ) : (
          <Eye cx={197.7} cy={273.78} rx={13.36} ry={26.45} />
        )}
        <Eyebrow
          d="M323.86,249.66c0.74,0.96-0.3,2.27-1.41,1.77c-5.35-2.43-15.49-6.57-22.45-6.57c-6.96,0-17.1,4.14-22.45,6.57
		c-1.11,0.5-2.15-0.81-1.41-1.77c3.28-4.25,10.54-10.88,23.86-10.88C313.33,238.79,320.58,245.41,323.86,249.66z"
        />
        {showSquintingEyes ? (
          <SquintingEye
            d="M318.57,278.28h-37.13c-2.48,0-4.5-2.01-4.5-4.5v0c0-2.48,2.01-4.5,4.5-4.5h37.13c2.48,0,4.5,2.01,4.5,4.5v0
		C323.07,276.26,321.06,278.28,318.57,278.28z"
          />
        ) : (
          <Eye cx={300.01} cy={273.78} rx={13.36} ry={26.45} />
        )}
      </animated.g>
      {/* Right Sparkles */}
      {counter % 2 ? (
        <g>
          <Sparkle
            transform={to(
              [sparkleRotation.scale, sparkleRotation.rotate],
              (s, r) =>
                `translate(450.97 193.02) scale(${s}) rotate(${r}) translate(-450.97 -193.02)`
            )}
            d="M462.14,198.51l-2.74,0.39c-3.42,0.49-6.63,1.96-9.24,4.23l-2.25,1.96c-0.95,0.83-2.43,0.25-2.57-1l-0.24-2.08
	c-0.44-3.78-2.06-7.32-4.65-10.11l-1.57-1.7c-0.87-0.94-0.29-2.48,0.99-2.61l1.79-0.18c3.98-0.41,7.72-2.14,10.6-4.92l1.58-1.53
	c0.89-0.85,2.37-0.39,2.61,0.81l0.69,3.41c0.55,2.71,1.71,5.25,3.4,7.43l2.62,3.38C463.89,196.96,463.33,198.34,462.14,198.51z"
          />
          <Sparkle
            transform={to(
              [sparkleRotation.scale, sparkleRotation.rotate],
              (s, r) =>
                `translate(416.44 247.67) scale(${s}) rotate(${r}) translate(-416.44 -247.67)`
            )}
            d="M427.61,253.17l-2.74,0.39c-3.42,0.49-6.63,1.96-9.24,4.23l-2.25,1.96c-0.95,0.83-2.43,0.25-2.57-1l-0.24-2.08
	c-0.44-3.78-2.06-7.32-4.65-10.11l-1.57-1.7c-0.87-0.94-0.29-2.48,0.99-2.61l1.79-0.18c3.98-0.41,7.72-2.14,10.6-4.92l1.58-1.53
	c0.89-0.85,2.37-0.39,2.61,0.81l0.69,3.41c0.55,2.71,1.71,5.25,3.4,7.43l2.62,3.38C429.35,251.61,428.79,253,427.61,253.17z"
          />

          <Sparkle
            transform={to(
              [sparkleRotation.scale, sparkleRotation.rotate],
              (s, r) =>
                `translate(408.2 201.23) scale(${s}) rotate(${r}) translate(-408.2 -201.23)`
            )}
            d="M415.56,204.84l-1.8,0.26c-2.25,0.32-4.37,1.29-6.08,2.79l-1.48,1.29c-0.62,0.54-1.6,0.17-1.69-0.66l-0.16-1.37
	c-0.29-2.49-1.36-4.82-3.06-6.65l-1.03-1.12c-0.57-0.62-0.19-1.63,0.65-1.72l1.18-0.12c2.62-0.27,5.08-1.41,6.98-3.24l1.04-1
	c0.58-0.56,1.56-0.26,1.72,0.54l0.45,2.25c0.36,1.78,1.13,3.45,2.24,4.89l1.72,2.22C416.7,203.82,416.34,204.73,415.56,204.84z"
          />
          <Sparkle
            transform={to(
              [sparkleRotation.scale, sparkleRotation.rotate],
              (s, r) =>
                `translate(420.714 188.75) scale(${s}) rotate(${r}) translate(-420.714 -188.75)`
            )}
            d="M428.07,192.37l-1.8,0.26c-2.25,0.32-4.37,1.29-6.08,2.79l-1.48,1.29c-0.62,0.54-1.6,0.17-1.69-0.66l-0.16-1.37
	c-0.29-2.49-1.36-4.82-3.06-6.65l-1.03-1.12c-0.57-0.62-0.19-1.63,0.65-1.72l1.18-0.12c2.62-0.27,5.08-1.41,6.98-3.24l1.04-1
	c0.58-0.56,1.56-0.26,1.72,0.54l0.45,2.25c0.36,1.78,1.13,3.45,2.24,4.89l1.72,2.22C429.22,191.35,428.85,192.26,428.07,192.37z"
          />
        </g>
      ) : (
        <g>
          <Sparkle
            transform={to(
              [sparkleRotation.scale, sparkleRotation.rotate],
              (s, r) =>
                `translate(49.4 193.9) scale(${s}) rotate(${r}) translate(-49.4 -193.9)`
            )}
            d="M38.23,199.39l2.74,0.39c3.42,0.49,6.63,1.96,9.24,4.23l2.25,1.96c0.95,0.83,2.43,0.25,2.57-1l0.24-2.08
	c0.44-3.78,2.06-7.32,4.65-10.11l1.57-1.7c0.87-0.94,0.29-2.48-0.99-2.61l-1.79-0.18c-3.98-0.41-7.72-2.14-10.6-4.92l-1.58-1.53
	c-0.89-0.85-2.37-0.39-2.61,0.81l-0.69,3.41c-0.55,2.71-1.71,5.25-3.4,7.43l-2.62,3.38C36.48,197.84,37.04,199.23,38.23,199.39z"
          />
          <Sparkle
            transform={to(
              [sparkleRotation.scale, sparkleRotation.rotate],
              (s, r) =>
                `translate(83 250) scale(${s}) rotate(${r}) translate(-83 -250)`
            )}
            d="M72.76,254.05l2.74,0.39c3.42,0.49,6.63,1.96,9.24,4.23l2.25,1.96c0.95,0.83,2.43,0.25,2.57-1l0.24-2.08
	c0.44-3.78,2.06-7.32,4.65-10.11l1.57-1.7c0.87-0.94,0.29-2.48-0.99-2.61l-1.79-0.18c-3.98-0.41-7.72-2.14-10.6-4.92l-1.58-1.53
	c-0.89-0.85-2.37-0.39-2.61,0.81l-0.69,3.41c-0.55,2.71-1.71,5.25-3.4,7.43l-2.62,3.38C71.02,252.5,71.58,253.88,72.76,254.05z"
          />
          <Sparkle
            transform={to(
              [sparkleRotation.scale, sparkleRotation.rotate],
              (s, r) =>
                `translate(92 203) scale(${s}) rotate(${r}) translate(-92 -203)`
            )}
            d="M84.81,205.73l1.8,0.26c2.25,0.32,4.37,1.29,6.08,2.79l1.48,1.29c0.62,0.54,1.6,0.17,1.69-0.66l0.16-1.37
	c0.29-2.49,1.36-4.82,3.06-6.65l1.03-1.12c0.57-0.62,0.19-1.63-0.65-1.72l-1.18-0.12c-2.62-0.27-5.08-1.41-6.98-3.24l-1.04-1
	c-0.58-0.56-1.56-0.26-1.72,0.54l-0.45,2.25c-0.36,1.78-1.13,3.45-2.24,4.89l-1.72,2.22C83.66,204.7,84.03,205.61,84.81,205.73z"
          />
          <Sparkle
            transform={to(
              [sparkleRotation.scale, sparkleRotation.rotate],
              (s, r) =>
                `translate(80 190) scale(${s}) rotate(${r}) translate(-80 -190)`
            )}
            d="M72.3,193.25l1.8,0.26c2.25,0.32,4.37,1.29,6.08,2.79l1.48,1.29c0.62,0.54,1.6,0.17,1.69-0.66l0.16-1.37
	c0.29-2.49,1.36-4.82,3.06-6.65l1.03-1.12c0.57-0.62,0.19-1.63-0.65-1.72l-1.18-0.12c-2.62-0.27-5.08-1.41-6.98-3.24l-1.04-1
	c-0.58-0.56-1.56-0.26-1.72,0.54l-0.45,2.25c-0.36,1.78-1.13,3.45-2.24,4.89l-1.72,2.22C71.15,192.23,71.52,193.14,72.3,193.25z"
          />
        </g>
      )}
      {/* Arms */}
      <Clothes
        id="Left_Arm"
        transform={leftArmMovement.y.to((value) => `translate(0 ${value})`)}
        d="M250.62,387.39v70.22c-13.43,4.12-110.82,32-110.82-27.03c0-1.66,0.03-3.28,0.1-4.88l-0.1-0.02
	l0.11-0.18c0.61-15.07,3.86-27.67,8.39-38.1H250.62z"
      />
      <Clothes
        id="Right_Arm"
        transform={rightArmMovement.y.to((value) => `translate(0 ${value})`)}
        d="M361.33,425.69c0.07,1.61,0.11,3.23,0.11,4.88c0,59.03-97.39,31.15-110.82,27.03v-70.22h102.32
	c4.54,10.42,7.79,23.03,8.39,38.1l0.11,0.18L361.33,425.69z"
      />
      {/*  */}
      {/* Laptop */}
      <animated.g
        transform={to(
          [laptopAnimation.scale],
          (s) =>
            `translate(252.16 427.58) scale(${s}) translate(-252.16 -427.58)`
        )}
      >
        <LaptopScreen
          d="M351.27,385.06l-8.16,80.98c-0.32,3.16-3.78,5.56-6.96,5.56H166.08c-3.08,0-6.66-1.93-7.08-4.97
		c0-0.02-0.01-0.04-0.01-0.07l-10.1-81.36c-0.22-1.75,0.33-3.51,1.49-4.83c1.17-1.32,2.85-2.08,4.62-2.08h190.14
		c1.77,0,3.38,0.72,4.57,2.03C350.89,381.62,351.45,383.31,351.27,385.06z"
        />
        <LaptopLogo cx={252.16} cy={427.58} rx={12.91} ry={11.71} />
        <LaptopBase
          d="M342.46,472.53l-0.18,1.83c-0.32,3.15-2.94,5.53-6.12,5.53H166.08c-3.1,0-5.72-2.31-6.1-5.39l-0.26-2.04
		c1.69,1.53,3.93,2.45,6.36,2.45h170.07C338.58,474.92,340.78,474.02,342.46,472.53z"
        />
        <LaptopOutline
          d="M352.18,378.1c-1.8-1.98-4.35-3.13-7.03-3.13H155c-2.72,0-5.31,1.17-7.1,3.2c-1.8,2.04-2.64,4.75-2.31,7.44l11.09,89.3
		c0.58,4.74,4.63,8.3,9.4,8.3h170.07c4.88,0,8.94-3.66,9.43-8.52l8.99-89.3C354.84,382.73,353.97,380.07,352.18,378.1z
		 M351.27,385.06l-8.16,80.98c-0.32,3.16-3.78,5.56-6.96,5.56H166.08c-3.08,0-6.66-1.93-7.08-4.97c0-0.02-0.01-0.04-0.01-0.07
		l-10.1-81.36c-0.22-1.75,0.33-3.51,1.49-4.83c1.17-1.32,2.85-2.08,4.62-2.08h190.14c1.77,0,3.38,0.72,4.57,2.03
		C350.89,381.62,351.45,383.31,351.27,385.06z M336.16,479.9H166.08c-3.1,0-5.72-2.31-6.1-5.39l-0.26-2.04
		c1.69,1.53,3.93,2.45,6.36,2.45h170.07c2.42,0,4.63-0.9,6.3-2.39l-0.18,1.83C341.96,477.52,339.33,479.9,336.16,479.9z"
        />
      </animated.g>
      {/*  */}
      <animated.g
        transform={speechBubbleMovement.y.to(
          (value) => `translate(0 ${value})`
        )}
      >
        {counter % 2 ? (
          <>
            <SpeechBubble
              d="M135.08,305.88l-9.37-11.16c-0.54-0.64-0.74-1.49-0.57-2.3c0.84-4.05,1.28-8.25,1.28-12.58
	c0-31.35-23.19-56.76-51.79-56.76c-28.6,0-51.79,25.41-51.79,56.76c0,31.35,23.19,56.76,51.79,56.76c16.81,0,31.73-8.78,41.19-22.38
	c0.41-0.59,1.04-1.01,1.75-1.13l15.89-2.8C135.53,309.92,136.42,307.47,135.08,305.88z"
              id={"Left_Speech"}
            />
            <Bojji x={42.5} y={237.5} />
          </>
        ) : (
          <>
            <SpeechBubble
              d="M364.92,306.24l9.37-11.16c0.54-0.64,0.74-1.49,0.57-2.3c-0.84-4.05-1.28-8.25-1.28-12.58
	c0-31.35,23.19-56.76,51.79-56.76c28.6,0,51.79,25.41,51.79,56.76c0,31.35-23.19,56.76-51.79,56.76c-16.81,0-31.73-8.78-41.19-22.38
	c-0.41-0.59-1.04-1.01-1.75-1.13l-15.89-2.8C364.47,310.29,363.58,307.84,364.92,306.24z"
              id={"Right_Speech"}
            />

            <Holmes x={387.5} y={245} />
          </>
        )}
      </animated.g>
    </svg>
  );
};
